Object.defineProperty(exports,"__esModule",{value:!0}),exports.Gmap=u,exports.GmapDOM=void 0;var n=function(n){if(n&&n.__esModule)return n;if(null===n||"object"!=typeof n&&"function"!=typeof n)return{default:n};var r=o();if(r&&r.has(n))return r.get(n);var t={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in n)if(Object.prototype.hasOwnProperty.call(n,u)){var i=e?Object.getOwnPropertyDescriptor(n,u):null;i&&(i.get||i.set)?Object.defineProperty(t,u,i):t[u]=n[u]}t.default=n,r&&r.set(n,t);return t}(require("react")),r=e(require("react-dom")),t=e(require("./lib"));function e(n){return n&&n.__esModule?n:{default:n}}function o(){if("function"!=typeof WeakMap)return null;var n=new WeakMap;return o=function(){return n},n}function u(r){var e=(0,n.useState)(),o=e[0],u=e[1],i=(0,n.useState)([]),a=i[0],c=i[1],f=(0,n.useRef)();return(0,n.useEffect)((function(){(0,t.default)(r.mapKey).then((function(n){n.createMap(f.current,{zoom:18,center:r.center||{lat:0,lng:0}}),u(n)}))}),[]),(0,n.useEffect)((function(){if(o){var n=function(n){var r=void 0===n?{}:n,t=r.googleMap,e=r.markers,o=void 0===e?[]:e,u=r.propsMarkers,i=void 0===u?[]:u;return t?(o.forEach((function(n){n.marker.setMap(null)})),i.forEach((function(n,r){var e=o[r];e?(e.marker.setPosition({lat:n.lat,lng:n.lng}),e.marker.setMap(t.getMap())):o.push({marker:t.createMarker({icon:n.icon,position:{lat:n.lat,lng:n.lng}}),info:t.createInfoWindow({content:"<div>"+n.info+"</div>"})})})),o):o}({googleMap:o,markers:a,propsMarkers:r.markers});c(n),o.createBound(r.markers)}}),[o,r.markers]),(0,n.useEffect)((function(){o&&a.map((function(n,t){r.markers[t]&&r.markers[t].showInfo?n.info.open(o,n.marker):n.info.close()}))}),[o,r.markers,a]),n.default.createElement("div",{ref:f,className:"map-container",style:r.style})}u.defaultProps={markers:[],routes:[]};var i=[],a={render:function(t,e){var o=n.default.createElement(u,t);return i.push(o),r.default.render(o,e),o},unmount:function(n){r.default.unmountComponentAtNode(n)},unmountAll:function(){i.forEach((function(n){return r.default.unmountComponentAtNode(n)})),i=[]}};exports.GmapDOM=a;